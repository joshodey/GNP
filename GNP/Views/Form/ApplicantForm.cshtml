@model GNP.ViewModel.ApplicationDashboardVM

@{
    ViewBag.Title = "Multi-Page Form";
}

<h2>Multi-Page Form</h2>

<div id="form-container">
    <div id="page1">
        <div class="form-group">
            <label asp-for="Applicant.User.FirstName" class="control-label"></label>
            <input asp-for="Applicant.User.FirstName" id="firstname" class="form-control" readonly />
            <span asp-validation-for="Applicant.User.FirstName" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Applicant.User.LastName" class="control-label">Surname</label>
            <input asp-for="Applicant.User.LastName" id="surname" class="form-control" readonly />
            <span asp-validation-for="Applicant.User.LastName" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label for="permitNumber" class="control-label" >Permit Number</label>
            <input id="permitNumber"  class="form-control" />
        </div>
        <div class="form-group">
            <label for="jsaNo" class="control-label">JSA No</label>
            <input id="jsaNo" class="form-control" />
        </div>
        <div class="form-group">
            <label for="company" class="control-label">Company</label>
            <input id="company" class="form-control" />
        </div>
        <div class="form-group">
            <label for="location" class="control-label">Location</label>
            <select asp-for="Locations" id="location" asp-items="Model.Locations" class="form-control">
                <option value="">Select Location</option> <!-- Placeholder option -->
            </select>
        </div>
        <div class="form-group">
            <label for="startDateTime" class="control-label">StartDate/Time</label>
            <input type="datetime-local" id="startDateTime" class="form-control" />
        </div>
        <div class="form-group">
            <label for="endDateTime" class="control-label">EndDate/Time</label>
            <input type="datetime-local" id="endDateTime" class="form-control" />
        </div>
        <div class="form-group">
            <label for="workActivityDescription" class="control-label">Work Activity Description</label>
            <input id="workActivityDescription" class="form-control" />
        </div>

        <button id="next-btn" class="btn btn-primary">Next</button>
    </div>

    <div id="page2" style="display:none;">
        <div class="form-group">
            <label for="endDateTime" class="control-label">EndDate/Time</label>
            <input type="datetime-local" id="endDateTime" class="form-control" />
        </div>

        
        <button id="submit-btn" class="btn btn-primary">Submit</button>
    </div>
</div>

<div id="success-message" style="display:none;">
    <h2>Form Submitted Successfully!</h2>
    <p>Thank you for submitting the form.</p>
</div>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#next-btn').click(function (e) {
                e.preventDefault();
                $('#page1').hide();
                $('#page2').show();
            });

            $('#submit-btn').click(function (e) {
                e.preventDefault();
                var formData = {
                    FirstName: $('#FirstName').val(),
                    LastName: $('#LastName').val(),
                    Email: $('#Email').val(),
                    PhoneNumber: $('#PhoneNumber').val()
                };

                $.ajax({
                    url: '@Url.Action("Submit", "Form")',
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            $('#form-container').hide();
                            $('#success-message').show();
                        } else {
                            // Handle validation errors
                            alert('Form submission failed. Please fix the errors and try again.');
                        }
                    },
                    error: function () {
                        alert('An error occurred while submitting the form. Please try again.');
                    }
                });
            });
        });
    </script>
}




